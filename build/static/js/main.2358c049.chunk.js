(this.webpackJsonphexmap=this.webpackJsonphexmap||[]).push([[0],{13:function(e,t,i){},14:function(e,t,i){},16:function(e,t,i){"use strict";i.r(t);var s=i(3),n=i.n(s),l=i(6),r=i.n(l),a=(i(13),i(1)),h=i(2),o=i(8),u=i(7),c=(i(14),i(0)),d={VERSION:"0.1.1",PI:Math.PI,TAU:2*Math.PI,DEG_TO_RAD:.0174532925,RAD_TO_DEG:57.2957795,SQRT3:Math.sqrt(3),TILE:"tile",ENT:"entity",STR:"structure",HEX:"hex",SQR:"square",ABS:"abstract"},f=new c.s,v=(f.load("./image/tundra.jpg"),f.load("./image/ice.jpg"),f.load("./image/water.jpg"),f.load("./image/sand.jpg"),f.load("./image/grassland.jpg"),f.load("./image/hills.jpg"),f.load("./image/mountains.jpg"),d),p=function(){this.obj=null,this.next=null,this.prev=null,this.free=!0},g=function(){function e(){Object(a.a)(this,e),this.first=null,this.last=null,this.length=0,this.objToNodeMap={},this.uniqueID=Date.now()+""+Math.floor(1e3*Math.random()),this.sortArray=[]}return Object(h.a)(e,[{key:"getNode",value:function(e){return this.objToNodeMap[e.uniqueID]}},{key:"addNode",value:function(t){var i=new p;if(!t.uniqueID)try{t.uniqueID=e.generateID()}catch(s){return console.error("[LinkedList.addNode] obj passed is immutable: cannot attach necessary identifier"),null}return i.obj=t,i.free=!1,this.objToNodeMap[t.uniqueID]=i,i}},{key:"swapObjects",value:function(e,t){this.objToNodeMap[e.obj.uniqueID]=null,this.objToNodeMap[t.uniqueID]=e,e.obj=t}},{key:"add",value:function(e){var t=this.objToNodeMap[e.uniqueID];if(t){if(!1===t.free)return;t.obj=e,t.free=!1,t.next=null,t.prev=null}else t=this.addNode(e);if(this.first){if(!this.last)throw new Error("[LinkedList.add] No last in the list -- that shouldn't happen here");this.last.next=t,t.prev=this.last,this.last=t,t.next=null}else this.first=t,this.last=t,t.next=null,t.prev=null;this.length++,this.showDebug&&this.dump("after add")}},{key:"has",value:function(e){return!!this.objToNodeMap[e.uniqueID]}},{key:"moveUp",value:function(e){this.dump("before move up");var t=this.getNode(e);if(!t)throw"Oops, trying to move an object that isn't in the list";if(t.prev){var i=t.prev,s=i.prev;t==this.last&&(this.last=i);var n=t.next;s&&(s.next=t),t.next=i,t.prev=i.prev,i.next=n,i.prev=t,this.first==i&&(this.first=t)}}},{key:"moveDown",value:function(e){var t=this.getNode(e);if(!t)throw"Oops, trying to move an object that isn't in the list";if(t.next){var i=t.next;this.moveUp(i.obj),this.last==i&&(this.last=t)}}},{key:"sort",value:function(e){var t,i,s=this.sortArray,n=this.first;for(s.length=0;n;)s.push(n.obj),n=n.next;for(this.clear(),s.sort(e),i=s.length,t=0;t<i;t++)this.add(s[t])}},{key:"remove",value:function(e){var t=this.getNode(e);return!(!t||t.free)&&(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.prev||(this.first=t.next),t.next||(this.last=t.prev),t.free=!0,t.prev=null,t.next=null,this.length--,!0)}},{key:"shift",value:function(){var e=this.first;return 0===this.length?null:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.first=e.next,e.next||(this.last=null),e.free=!0,e.prev=null,e.next=null,this.length--,e.obj)}},{key:"pop",value:function(){var e=this.last;return 0===this.length?null:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.last=e.prev,e.prev||(this.first=null),e.free=!0,e.prev=null,e.next=null,this.length--,e.obj)}},{key:"concat",value:function(e){for(var t=e.first;t;)this.add(t.obj),t=t.next}},{key:"clear",value:function(){for(var e=this.first;e;)e.free=!0,e=e.next;this.first=null,this.length=0}},{key:"dispose",value:function(){for(var e=this.first;e;)e.obj=null,e=e.next;this.first=null,this.objToNodeMap=null}},{key:"dump",value:function(e){console.log("===================="+e+"=====================");for(var t=this.first;t;)console.log("{"+t.obj.toString()+"} previous="+(t.prev?t.prev.obj:"NULL")),t=t.next();console.log("==================================="),console.log("Last: {"+(this.last?this.last.obj:"NULL")+"} First: {"+(this.first?this.first.obj:"NULL")+"}")}}],[{key:"generateID",value:function(){return Math.random().toString(36).slice(2)+Date.now()}}]),e}(),m=function(){function e(t,i,s,n){Object(a.a)(this,e),this.q=t||0,this.r=i||0,this.s=s||0,this.h=n||1,this.tile=null,this.userData={},this.walkable=!0,this._calcCost=0,this._priority=0,this._visited=!1,this._parent=null,this.uniqueID=g.generateID()}return Object(h.a)(e,[{key:"set",value:function(e,t,i){return this.q=e,this.r=t,this.s=i,this}},{key:"copy",value:function(e){return this.q=e.q,this.r=e.r,this.s=e.s,this.h=e.h,this.tile=e.tile||null,this.userData=e.userData||{},this.walkable=e.walkable,this}},{key:"add",value:function(e){return this.q+=e.q,this.r+=e.r,this.s+=e.s,this}},{key:"equals",value:function(e){return this.q===e.q&&this.r===e.r&&this.s===e.s}}]),e}(),y=function(){function e(){Object(a.a)(this,e)}return Object(h.a)(e,null,[{key:"clamp",value:function(e,t,i){return Math.max(t,Math.min(i,e))}},{key:"sign",value:function(e){return e&&e/Math.abs(e)}},{key:"random",value:function(e,t){return 1===arguments.length?Math.random()*e-.5*e:Math.random()*(t-e)+e}},{key:"randomInt",value:function(e,t){return 1===arguments.length?Math.random()*e-.5*e|0:Math.random()*(t-e+1)+e|0}},{key:"normalize",value:function(e,t,i){return(e-t)/(i-t)}},{key:"getShortRotation",value:function(e){return(e%=this.TAU)>this.PI?e-=this.TAU:e<-this.PI&&(e+=this.TAU),e}},{key:"generateID",value:function(){return Math.random().toString(36).slice(2)+Date.now()}},{key:"isPlainObject",value:function(e){if("object"!==typeof e||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},{key:"merge",value:function(e,t){var i=this,s=Array.isArray(t),n=s&&[]||{};return s?(e=e||[],n=n.concat(e),t.forEach((function(t,s){"undefined"===typeof n[s]?n[s]=t:i.isPlainObject(t)?n[s]=i.merge(e[s],t):-1===e.indexOf(t)&&n.push(t)})),n):(e&&i.isPlainObject(e)&&Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(s){t[s]&&i.isPlainObject(t[s])&&e[s]?n[s]=i.merge(e[s],t[s]):n[s]=t[s]})),n)}},{key:"now",value:function(){return window.nwf?window.nwf.system.Performance.elapsedTime:window.performance.now()}},{key:"empty",value:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}},{key:"radixSort",value:function(e,t,i,s){if(s=s||31,!((t=t||0)>=(i=i||e.length)-1||s<0)){for(var n=t,l=i,r=1<<s;n<l;)if(e[n]&r){--l;var a=e[n];e[n]=e[l],e[l]=a}else++n;this.radixSort(e,t,l,s-1),this.radixSort(e,l,i,s-1)}}},{key:"randomizeRGB",value:function(e,t){var i,s,n=e.split(","),l="rgb(";for(t=this.randomInt(t),i=0;i<3;i++)(s=parseInt(n[i])+t)<0?s=0:s>255&&(s=255),l+=s+",";return l=l.substring(0,l.length-1),l+=")"}},{key:"getJSON",value:function(e){var t=new XMLHttpRequest,i="undefined"!==typeof e.cache&&e.cache?e.url:e.url+"?t="+Math.floor(1e4*Math.random())+Date.now();t.onreadystatechange=function(){if(200!==this.status)0!==this.status&&console.warn("[Tools.getJSON] Error: "+this.status+" ("+this.statusText+") :: "+e.url);else{var t=null;try{t=JSON.parse(this.responseText)}catch(i){return}e.callback.call(e.scope||null,t)}},t.open("GET",i,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Content-Type","application/json"),t.send("")}}]),e}(),b=function(){function e(t){Object(a.a)(this,e),t=t||{};var i={cell:null,geometry:null,material:null};if(!(i=y.merge(i,t)).cell||!i.geometry)throw new Error("Missing vg.Tile configuration");this.cell=i.cell,this.cell.tile&&this.cell.tile!==this&&this.cell.tile.dispose(),this.cell.tile=this,this.uniqueID=y.generateID(),this.geometry=i.geometry,this.material=i.material,this.material||(this.material=new c.k),this.objectType=v.TILE,this.entity=null,this.userData={},this.selected=!1,this.highlight="0x0084cc",this.mesh=new c.i(this.geometry),this.mesh.userData.structure=this,this.position=this.mesh.position,this.rotation=this.mesh.rotation,this.rotation.x=-90*v.DEG_TO_RAD,this.mesh.scale.set(i.scale,i.scale,1),this.material.emissive?this._emissive=this.material.emissive.getHex():this._emissive=null}return Object(h.a)(e,[{key:"select",value:function(){return this.material.emissive&&this.material.emissive.setHex(this.highlight),this.selected=!0,this}},{key:"deselect",value:function(){return null!==this._emissive&&this.material.emissive&&this.material.emissive.setHex(this._emissive),this.selected=!1,this}},{key:"toggle",value:function(){return this.selected?this.deselect():this.select(),this}},{key:"dispose",value:function(){this.cell&&this.cell.tile&&(this.cell.tile=null),this.cell=null,this.position=null,this.rotation=null,this.mesh.parent&&this.mesh.parent.remove(this.mesh),this.mesh.userData.structure=null,this.mesh=null,this.material=null,this.userData=null,this.entity=null,this.geometry=null,this._emissive=null}}]),e}(),w=function(){function e(t){Object(a.a)(this,e),this._geoCache={},t=t||{},this.type=v.HEX,this.size=5,this.cellSize="undefined"===typeof t.cellSize?10:t.cellSize,this.cells={},this.numCells=0,this.extrudeSettings=null,this.autogenerated=!1;var i,s=[];for(i=0;i<6;i++)s.push(this.createVertex(i));for(this.cellShape=new c.p,this.cellShape.moveTo(s[0].x,s[0].y),i=1;i<6;i++)this.cellShape.lineTo(s[i].x,s[i].y);this.cellShape.lineTo(s[0].x,s[0].y),this.cellShape.autoClose=!0,this.cellGeo=new c.d,this.cellGeo.vertices=s,this.cellGeo.verticesNeedUpdate=!0,this.cellShapeGeo=new c.q(this.cellShape),this._cellWidth=2*this.cellSize,this._cellLength=.5*v.SQRT3*this._cellWidth,this._hashDelimeter=".",this._directions=[new m(1,-1,0),new m(1,0,-1),new m(0,1,-1),new m(-1,1,0),new m(-1,0,1),new m(0,-1,1)],this._diagonals=[new m(2,-1,-1),new m(1,1,-2),new m(-1,2,-1),new m(-2,1,1),new m(-1,-1,2),new m(1,-2,1)],this._list=[],this._vec3=new c.t,this._cel=new m,this._conversionVec=new c.t,this._geoCache=[],this._matCache=[]}return Object(h.a)(e,[{key:"createVertex",value:function(e){var t=v.TAU/6*e;return new c.t(this.cellSize*Math.cos(t),this.cellSize*Math.sin(t),0)}},{key:"cubeRound",value:function(e){var t=Math.round(e.q),i=Math.round(e.r),s=Math.round(e.s),n=Math.abs(t-e.q),l=Math.abs(i-e.r),r=Math.abs(s-e.s);return n>l&&n>r?t=-i-s:l>r?i=-t-s:s=-t-i,this._cel.set(t,i,s)}},{key:"cellToPixel",value:function(e){return this._vec3.x=e.q*this._cellWidth*.75,this._vec3.y=e.h,this._vec3.z=-(e.s-e.r)*this._cellLength*.5,this._vec3}},{key:"pixelToCell",value:function(t){var i=t.x*(e.TWO_THIRDS/this.cellSize),s=(-t.x/3+v.SQRT3/3*t.z)/this.cellSize;return this._cel.set(i,s,-i-s),this._cubeRound(this._cel)}},{key:"getCellAt",value:function(t){var i=t.x*(e.TWO_THIRDS/this.cellSize),s=(-t.x/3+v.SQRT3/3*t.z)/this.cellSize;return this._cel.set(i,s,-i-s),this._cubeRound(this._cel),this.cells[this.cellToHash(this._cel)]}},{key:"getNeighbors",value:function(e,t,i){var s,n,l=this._directions.length;for(this._list.length=0,s=0;s<l;s++)this._cel.copy(e),this._cel.add(this._directions[s]),!(n=this.cells[this.cellToHash(this._cel)])||i&&!i(e,n)||this._list.push(n);if(t)for(s=0;s<l;s++)this._cel.copy(e),this._cel.add(this._diagonals[s]),!(n=this.cells[this.cellToHash(this._cel)])||i&&!i(e,n)||this._list.push(n);return this._list}},{key:"getRandomCell",value:function(){var e,t=0,i=v.Tools.randomInt(0,this.numCells);for(e in this.cells){if(t===i)return this.cells[e];t++}return this.cells[e]}},{key:"cellToHash",value:function(e){return e.q+this._hashDelimeter+e.r+this._hashDelimeter+e.s}},{key:"distance",value:function(e,t){var i=Math.max(Math.abs(e.q-t.q),Math.abs(e.r-t.r),Math.abs(e.s-t.s));return i+=t.h-e.h}},{key:"clearPath",value:function(){var e,t;for(e in this.cells)(t=this.cells[e])._calcCost=0,t._priority=0,t._parent=null,t._visited=!1}},{key:"traverse",value:function(e){var t;for(t in this.cells)e(this.cells[t])}},{key:"generateTile",value:function(e,t,i){var s=Math.abs(e.h);s<1&&(s=1);var n=this._geoCache[s];n||(this.extrudeSettings.depth=s,n=new c.c(this.cellShape,this.extrudeSettings),this._geoCache[s]=n);var l=new b({size:this.cellSize,scale:t,cell:e,geometry:n,material:i});return e.tile=l,l}},{key:"generateTiles",value:function(e){e=e||{};var t,i,s,n=[],l={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{depth:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:this.cellSize/20,bevelThickness:this.cellSize/20}};for(t in l=y.merge(l,e),this.cellSize=l.cellSize,this._cellWidth=2*this.cellSize,this._cellLength=.5*v.SQRT3*this._cellWidth,this.autogenerated=!0,this.extrudeSettings=l.extrudeSettings,this.cells)s=this.cells[t],(i=this.generateTile(s,l.tileScale,l.material)).position.copy(this.cellToPixel(s)),i.position.y=0,n.push(i);return n}},{key:"generateTilePoly",value:function(e){e||(e=new c.j({color:2405631}));var t=new c.i(this.cellShapeGeo,e);return this._vec3.set(1,0,0),t.rotateOnAxis(this._vec3,v.PI/2),t}},{key:"generate",value:function(e){var t,i,s,n;for(e=e||{},this.size="undefined"===typeof e.size?this.size:e.size,t=-this.size;t<this.size+1;t++)for(i=-this.size;i<this.size+1;i++)s=-t-i,Math.abs(t)<=this.size&&Math.abs(i)<=this.size&&Math.abs(s)<=this.size&&(n=new m(t,i,s),this.add(n))}},{key:"generateOverlay",value:function(e,t,i){var s,n,l,r=this.cellShape.createPointsGeometry();for(s=-e;s<e+1;s++)for(n=-e;n<e+1;n++)if(l=-s-n,Math.abs(s)<=e&&Math.abs(n)<=e&&Math.abs(l)<=e){this._cel.set(s,n,l);var a=new c.f(r,i);a.position.copy(this.cellToPixel(this._cel)),a.rotation.x=90*v.DEG_TO_RAD,t.add(a)}}},{key:"add",value:function(e){var t=this.cellToHash(e);if(!this.cells[t])return this.cells[t]=e,this.numCells++,e}},{key:"remove",value:function(e){var t=this.cellToHash(e);this.cells[t]&&(delete this.cells[t],this.numCells--)}},{key:"load",value:function(e,t,i){var s=this;y.getJSON({url:e,callback:function(e){s.fromJSON(e),t.call(i||null,e)},cache:!1,scope:s})}},{key:"fromJSON",value:function(e){var t,i,s=e.cells;for(this.cells={},this.numCells=0,this.size=e.size,this.cellSize=e.cellSize,this._cellWidth=2*this.cellSize,this._cellLength=.5*v.SQRT3*this._cellWidth,this.extrudeSettings=e.extrudeSettings,this.autogenerated=e.autogenerated,t=0;t<s.length;t++)(i=new m).copy(s[t]),this.add(i)}},{key:"toJSON",value:function(){var e,t,i={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},s=[];for(t in this.cells)e=this.cells[t],s.push({q:e.q,r:e.r,s:e.s,h:e.h,walkable:e.walkable,userData:e.userData});return i.cells=s,i}}]),e}(),k=function(){function e(){Object(a.a)(this,e)}return Object(h.a)(e,[{key:"backtrace",value:function(e){for(var t=[e];e._parent;)e=e._parent,t.push(e);return t.reverse()}},{key:"biBacktrace",value:function(e,t){var i=this.backtrace(e),s=this.backtrace(t);return i.concat(s.reverse())}},{key:"pathLength",value:function(e){var t,i,s,n,l,r=0;for(t=1;t<e.length;++t)i=e[t-1],s=e[t],n=i[0]-s[0],l=i[1]-s[1],r+=Math.sqrt(n*n+l*l);return r}},{key:"interpolate",value:function(e,t,i,s){var n,l,r,a,h,o,u=Math.abs,c=[];for(n=e<i?1:-1,l=t<s?1:-1,h=(r=u(i-e))-(a=u(s-t));e!==i||t!==s;)c.push([e,t]),(o=2*h)>-a&&(h-=a,e+=n),o<r&&(h+=r,t+=l);return c}},{key:"expandPath",value:function(e){var t,i,s,n,l,r,a=[],h=e.length;if(h<2)return a;for(l=0;l<h-1;++l)for(t=e[l],i=e[l+1],n=(s=this.interpolate(t[0],t[1],i[0],i[1])).length,r=0;r<n-1;++r)a.push(s[r]);return a.push(e[h-1]),a}},{key:"smoothenPath",value:function(e,t){var i,s,n,l,r,a,h,o,u,c,d,f,v=t.length,p=t[0][0],g=t[0][1],m=t[v-1][0],y=t[v-1][1];for(r=[[i=p,s=g]],h=2;h<v;++h){for(n=(u=t[h])[0],l=u[1],c=this.interpolate(i,s,n,l),f=!1,o=1;o<c.length;++o)if(d=c[o],!e.isWalkableAt(d[0],d[1])){f=!0;break}f&&(a=t[h-1],r.push(a),i=a[0],s=a[1])}return r.push([m,y]),r}},{key:"compressPath",value:function(e){if(e.length<3)return e;var t,i,s,n,l,r,a=[],h=e[0][0],o=e[0][1],u=e[1][0],c=e[1][1],d=u-h,f=c-o;for(d/=l=Math.sqrt(d*d+f*f),f/=l,a.push([h,o]),r=2;r<e.length;r++)t=u,i=c,s=d,n=f,d=(u=e[r][0])-t,f=(c=e[r][1])-i,f/=l=Math.sqrt(d*d+f*f),(d/=l)===s&&f===n||a.push([t,i]);return a.push([u,c]),a}}]),e}(),x=function(){function e(t){Object(a.a)(this,e),t=t||{};var i={allowDiagonal:!1,heuristicFilter:null};i=y.merge(i,t),this.allowDiagonal=i.allowDiagonal,this.heuristicFilter=i.heuristicFilter,this.list=new g}return Object(h.a)(e,[{key:"findPath",value:function(e,t,i,s){var n,l,r,a,h,o;for(i=i||this.heuristicFilter,s.clearPath(),this.list.clear(),this.list.add(e);this.list.length>0;){if(this.list.sort(this.compare),(n=this.list.shift())._visited=!0,n===t)return k.backtrace(t);for(h=0,o=(r=s.getNeighbors(n,this.allowDiagonal,i)).length;h<o;h++)if((a=r[h]).walkable&&(l=n._calcCost+s.distance(n,a),!a._visited||l<a._calcCost)){if(a._visited=!0,a._parent=n,a._calcCost=l,a._priority=l+s.distance(t,a),a===t)return k.backtrace(t);this.list.add(a)}}return null}},{key:"compare",value:function(e,t){return e._priority-t._priority}}]),e}(),T=function(){function e(){Object(a.a)(this,e),this.manager=null,this.imageLoader=null,this.crossOrigin=!1}return Object(h.a)(e,null,[{key:"init",value:function(e){this.crossOrigin=e||!1,this.manager=new c.h((function(){}),(function(){}),(function(){console.warn("Error loading images")})),this.imageLoader=new c.e(this.manager),this.imageLoader.crossOrigin=e}},{key:"loadTexture",value:function(e,t,i,s){var n=new c.r(null,t);return this.imageLoader.load(e,(function(e){n.image=e,n.needsUpdate=!0,i&&i(n)}),null,(function(e){s&&s(e)})),n.sourceFile=e,n}}]),e}(),_=function(){function e(t,i){if(Object(a.a)(this,e),!t)throw new Error("You must pass in a grid system for the board to use.");this.tiles=[],this.tileGroup=null,this.group=new c.l,this.grid=null,this.overlay=null,this.finder=new x(i),T.init(),this.setGrid(t)}return Object(h.a)(e,[{key:"setEntityOnTile",value:function(e,t){var i=this.grid.cellToPixel(t.cell);e.position.copy(i),e.position.y+=e.heightOffset||0,e.tile&&(e.tile.entity=null),e.tile=t,t.entity=e}},{key:"addTile",value:function(e){-1===this.tiles.indexOf(e)&&(this.tiles.push(e),this.snapTileToGrid(e),e.position.y=0,this.tileGroup.add(e.mesh),this.grid.add(e.cell),e.cell.tile=e)}},{key:"removeTile",value:function(e){if(e){var t=this.tiles.indexOf(e);this.grid.remove(e.cell),-1!==t&&this.tiles.splice(t,1),e.dispose()}}},{key:"removeAllTiles",value:function(){if(this.tileGroup)for(var e=this.tileGroup.children,t=0;t<e.length;t++)this.tileGroup.remove(e[t])}},{key:"getTileAtCell",value:function(e){var t=this.grid.cellToHash(e);return e.tile||("undefined"!==typeof this.grid.cells[t]?this.grid.cells[t].tile:null)}},{key:"snapToGrid",value:function(e){var t=this.grid.pixelToCell(e);e.copy(this.grid.cellToPixel(t))}},{key:"snapTileToGrid",value:function(e){if(e.cell)e.position.copy(this.grid.cellToPixel(e.cell));else{var t=this.grid.pixelToCell(e.position);e.position.copy(this.grid.cellToPixel(t))}return e}},{key:"getRandomTile",value:function(){var e=y.randomInt(0,this.tiles.length-1);return this.tiles[e]}},{key:"findPath",value:function(e,t,i){return this.finder.findPath(e.cell,t.cell,i,this.grid)}},{key:"setGrid",value:function(e){this.group.remove(this.tileGroup),this.grid&&e!==this.grid&&(this.removeAllTiles(),this.tiles.forEach((function(e){this.grid.remove(e.cell),e.dispose()})),this.grid.dispose()),this.grid=e,this.tiles=[],this.tileGroup=new c.l,this.group.add(this.tileGroup)}},{key:"generateOverlay",value:function(e){var t=new c.g({color:0,opacity:.3});this.overlay&&this.group.remove(this.overlay),this.overlay=new c.l,this.grid.generateOverlay(e,this.overlay,t),this.group.add(this.overlay)}},{key:"generateTilemap",value:function(e){this.reset();var t=this.grid.generateTiles(e);this.tiles=t,this.tileGroup=new c.l;for(var i=0;i<t.length;i++)this.tileGroup.add(t[i].mesh);this.group.add(this.tileGroup)}},{key:"reset",value:function(){this.removeAllTiles(),this.tileGroup&&this.group.remove(this.tileGroup)}}]),e}(),j=function(){function e(t,i){Object(a.a)(this,e);var s={element:document.body,alpha:!0,antialias:!0,clearColor:"#fff",sortObjects:!1,fog:null,light:new c.b(16777215),lightPosition:null,cameraType:"PerspectiveCamera",cameraPosition:null,orthoZoom:4},n={minDistance:100,maxDistance:1e3,zoomSpeed:2,noZoom:!1};if(s=y.merge(s,t),"boolean"!==typeof i&&(n=y.merge(n,i)),this.renderer=new c.u({alpha:s.alpha,antialias:s.antialias}),this.renderer.setClearColor(s.clearColor,0),this.renderer.sortObjects=s.sortObjects,this.width=window.innerWidth,this.height=window.innerHeight,this.orthoZoom=s.orthoZoom,this.container=new c.o,this.container.fog=s.fog,this.container.add(new c.a(14540253)),s.lightPosition||s.light.position.set(-1,1,-1).normalize(),this.container.add(s.light),"OrthographicCamera"===s.cameraType){var l=window.innerWidth/this.orthoZoom,r=window.innerHeight/this.orthoZoom;this.camera=new c.m(l/-2,l/2,r/2,r/-2,1,5e3)}else this.camera=new c.n(50,this.width/this.height,1,5e3);this.contolled=!!i,s.cameraPosition&&this.camera.position.copy(s.cameraPosition),window.addEventListener("resize",function(){if(this.width=window.innerWidth,this.height=window.innerHeight,"OrthographicCamera"===this.camera.type){var e=this.width/this.orthoZoom,t=this.height/this.orthoZoom;this.camera.left=e/-2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=t/-2}else this.camera.aspect=this.width/this.height;this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}.bind(this),!1),this.attachTo(s.element)}return Object(h.a)(e,[{key:"attachTo",value:function(e){e.style.width=this.width+"px",e.style.height=this.height+"px",this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),e.appendChild(this.renderer.domElement)}},{key:"add",value:function(e){this.container.add(e)}},{key:"remove",value:function(e){this.container.remove(e)}},{key:"render",value:function(){this.renderer.render(this.container,this.camera)}},{key:"updateOrthoZoom",value:function(){if(this.orthoZoom<=0)this.orthoZoom=0;else{var e=this.width/this.orthoZoom,t=this.height/this.orthoZoom;this.camera.left=e/-2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=t/-2,this.camera.updateProjectionMatrix()}}},{key:"focusOn",value:function(e){this.camera.lookAt(e.position)}},{key:"animate",value:function(){this.renderer.render(this.container,this.camera)}}]),e}(),S=i(4),O=function(e){Object(o.a)(i,e);var t=Object(u.a)(i);function i(){return Object(a.a)(this,i),t.apply(this,arguments)}return Object(h.a)(i,[{key:"componentDidMount",value:function(){var e=new j({element:this.mount,cameraPosition:{x:207.5,y:250,z:360}},!0),t=new w,i=new _(t);t.load("./hex-map.json",(function(){i.generateTilemap()}),this),e.add(i.group),e.focusOn(i.group),console.log(i.group);!function t(){requestAnimationFrame(t),e.animate()}()}},{key:"render",value:function(){var e=this;return Object(S.jsx)("div",{ref:function(t){return e.mount=t}})}}]),i}(n.a.Component),M=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,17)).then((function(t){var i=t.getCLS,s=t.getFID,n=t.getFCP,l=t.getLCP,r=t.getTTFB;i(e),s(e),n(e),l(e),r(e)}))};r.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(O,{})}),document.getElementById("root")),M()}},[[16,1,2]]]);
//# sourceMappingURL=main.2358c049.chunk.js.map